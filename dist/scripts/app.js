"use strict";angular.module("config",[]).constant("api_host","http://slam.coperable.org").value("debug",!0),function(){angular.module("app",["ngAnimate","ngAria","ngResource","ngMaterial","ui.router","ui.bootstrap","ui.tree","ngMap","ngTagsInput","textAngular","angular-loading-bar","duScroll","satellizer","lr.upload","app.nav","app.page","app.i18n","config","app.services","app.account","app.regions","app.users","app.sliders","app.participants","app.competitions"])}(),function(){angular.module("app").config(["$stateProvider","$urlRouterProvider","$authProvider","api_host",function(a,b,c,d){function e(a,b){var c=a.defer();return b.isAuthenticated()?c.reject():c.resolve(),c.promise}function f(a,b,c){var d=a.defer();return c.isAuthenticated()?d.resolve():b.path("/login"),d.promise}var g,h;g=["slam/regions/list","slam/sliders/list","slam/users/list","slam/participants/list","slam/users/edit"],h=function(b){var c,d;return d="/"+b,c={url:d,templateUrl:"views/"+b+".html",resolve:{loginRequired:f}},a.state(b,c),a},g.forEach(function(a){return h(a)}),a.state("login",{url:"/login",templateUrl:"views/slam/account/signin.html",resolve:{skipIfLoggedIn:e}}).state("home",{url:"/",templateUrl:"views/dashboard.html",resolve:{loginRequired:f}}).state("dashboard",{url:"/dashboard",templateUrl:"views/dashboard.html",resolve:{loginRequired:f}}).state("region-view",{url:"/region-view/:regionId",templateUrl:"views/slam/regions/view.html",resolve:{loginRequired:f}}).state("user-view",{url:"/user-view/:userId",templateUrl:"views/slam/users/view.html",resolve:{loginRequired:f}}).state("participant-view",{url:"/participant-view/:userId",templateUrl:"views/slam/participants/view.html",resolve:{loginRequired:f}}).state("region-new",{url:"/region-new",templateUrl:"views/slam/regions/edit.html",resolve:{loginRequired:f}}).state("region-edit",{url:"/region-edit/:regionId",templateUrl:"views/slam/regions/edit.html",resolve:{loginRequired:f}}).state("slider-list",{url:"/slider-list",templateUrl:"views/slam/sliders/list.html",resolve:{loginRequired:f}}).state("slider-new",{url:"/slider-new",templateUrl:"views/slam/sliders/edit.html",resolve:{loginRequired:f}}).state("slider-edit",{url:"/slider-edit/:sliderId",templateUrl:"views/slam/sliders/edit.html",resolve:{loginRequired:f}}).state("participant-new",{url:"/participant-new",templateUrl:"views/slam/participants/edit.html",resolve:{loginRequired:f}}).state("participant-edit",{url:"/participant-edit/:participantId",templateUrl:"views/slam/participants/edit.html",resolve:{loginRequired:f}}).state("competition-new",{url:"/competition-new/:regionId",templateUrl:"views/slam/competitions/edit.html",resolve:{loginRequired:f}}).state("competition-edit",{url:"/competition-edit/:competitionId",templateUrl:"views/slam/competitions/edit.html",resolve:{loginRequired:f}}).state("competition-view",{url:"/competition-view/:competitionId",templateUrl:"views/slam/competitions/view.html",resolve:{loginRequired:f}}).state("signin",{url:"/signup",templateUrl:"views/slam/account/signup.html",resolve:{skipIfLoggedIn:e}}),b.otherwise("/login"),c.baseUrl=d+"/",c.httpInterceptor=!0,c.signupRedirect=null}])}(),function(){function a(a,b,c,d){var e=new Date,f=e.getFullYear();a.main={brand:"Slam - Admin",name:"Lisa",year:f},a.pageTransitionOpts=[{name:"Desde arriba","class":"animate-fade-up"},{name:"Aumentar","class":"ainmate-scale-up"},{name:"Desde la derecha","class":"ainmate-slide-in-right"},{name:"Girar","class":"animate-flip-y"}],a.admin={layout:"wide",menu:"vertical",fixedHeader:!0,fixedSidebar:!0,pageTransition:a.pageTransitionOpts[0],skin:"22"},a.color={primary:"#E16038",success:"#4CAF50",info:"#00BCD4",infoAlt:"#673AB7",warning:"#FFC107",danger:"#F44336",gray:"#DCDCDC"},b.$on("$stateChangeSuccess",function(a,b,c){d.scrollTo(0,0)})}function b(a){a.theme("default").primaryPalette("indigo",{"default":"500"}).accentPalette("cyan",{"default":"500"}).warnPalette("red",{"default":"500"}).backgroundPalette("grey")}angular.module("app").controller("AppCtrl",["$scope","$rootScope","$state","$document",a]).config(["$mdThemingProvider",b])}(),function(){function a(a){a.useStaticFilesLoader({prefix:"i18n/",suffix:".json"}),a.preferredLanguage("es")}function b(a,b){a.lang="Español",a.setLang=function(c){switch(c){case"English":b.use("en");break;case"Español":b.use("es");break;case"中文":b.use("zh");break;case"日本語":b.use("ja");break;case"Portugal":b.use("pt");break;case"Русский язык":b.use("ru")}return a.lang=c},a.getFlag=function(){var b;switch(b=a.lang){case"English":return"flags-american";case"Español":return"flags-spain";case"中文":return"flags-china";case"Portugal":return"flags-portugal";case"日本語":return"flags-japan";case"Русский язык":return"flags-russia"}}}angular.module("app.i18n",["pascalprecht.translate"]).config(["$translateProvider",a]).controller("LangCtrl",["$scope","$translate",b])}(),function(){angular.module("app.nav",[])}(),function(){function a(a){function b(b,c,d){var e;e=$("#app"),c.on("click",function(b){return e.hasClass("nav-collapsed-min")?e.removeClass("nav-collapsed-min"):(e.addClass("nav-collapsed-min"),a.$broadcast("nav:reset")),b.preventDefault()})}var c={restrict:"A",link:b};return c}function b(){function a(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;m=250,j=$(window),g=b.find("ul").parent("li"),g.append('<i class="fa fa-angle-down icon-has-ul-h"></i><i class="fa fa-angle-right icon-has-ul"></i>'),d=g.children("a"),h=b.children("li").not(g),e=h.children("a"),f=$("#app"),i=$("#nav-container"),d.on("click",function(a){var b,c;return f.hasClass("nav-collapsed-min")||i.hasClass("nav-horizontal")&&j.width()>=768?!1:(c=$(this),b=c.parent("li"),g.not(b).removeClass("open").find("ul").slideUp(m),b.toggleClass("open").find("ul").stop().slideToggle(m),void a.preventDefault())}),e.on("click",function(a){g.removeClass("open").find("ul").slideUp(m)}),a.$on("nav:reset",function(a){g.removeClass("open").find("ul").slideUp(m)}),k=void 0,l=j.width(),n=function(){var a;a=j.width(),768>a&&f.removeClass("nav-collapsed-min"),768>l&&a>=768&&i.hasClass("nav-horizontal")&&g.removeClass("open").find("ul").slideUp(m),l=a},j.resize(function(){var a;clearTimeout(a),a=setTimeout(n,300)})}var b={restrict:"A",link:a};return b}function c(){function a(a,b,c,d){var e,f,g;f=b.find("a"),g=function(){return d.path()},e=function(a,b){return b="#"+b,angular.forEach(a,function(a){var c,d,e;return d=angular.element(a),c=d.parent("li"),e=d.attr("href"),c.hasClass("active")&&c.removeClass("active"),0===b.indexOf(e)?c.addClass("active"):void 0})},e(f,d.path()),a.$watch(g,function(a,b){return a!==b?e(f,d.path()):void 0},!0)}var b={restrict:"A",controller:["$scope","$element","$attrs","$location",a]};return b}function d(){function a(a,b,c){b.on("click",function(){return $("#app").toggleClass("on-canvas")})}var b={restrict:"A",link:a};return b}angular.module("app.nav").directive("toggleNavCollapsedMin",["$rootScope",a]).directive("collapseNav",b).directive("highlightActive",c).directive("toggleOffCanvas",d)}(),function(){angular.module("app.page",[])}(),function(){function a(a,b,c){a.login=function(){c.url("/")},a.signup=function(){c.url("/")},a.reset=function(){c.url("/")},a.unlock=function(){c.url("/")}}angular.module("app.page").controller("authCtrl",["$scope","$window","$location",a])}(),function(){function a(){function a(a,b,c){var d,e;e=function(){return c.path()},d=function(a){switch(b.removeClass("body-wide body-err body-lock body-auth"),a){case"/404":case"/pages/404":case"/pages/500":return b.addClass("body-wide body-err");case"/login":case"/signup":case"/slam/account/signin":case"/slam/account/signup":case"/pages/signin":case"/pages/signin":case"/pages/signup":case"/pages/forgot-password":return b.addClass("body-wide body-auth");case"/pages/lock-screen":return b.addClass("body-wide body-lock")}},d(c.path()),a.$watch(e,function(a,b){return a!==b?d(c.path()):void 0},!0)}var b={restrict:"A",controller:["$scope","$element","$location",a]};return b}angular.module("app.page").directive("customPage",a)}(),function(){angular.module("app.services",[]).factory("logger",[function(){var a;return toastr.options={closeButton:!0,positionClass:"toast-bottom-right",timeOut:"3000"},a=function(a,b){return toastr[b](a)},{log:function(b){a(b,"info")},logWarning:function(b){a(b,"warning")},logSuccess:function(b){a(b,"success")},logError:function(b){a(b,"error")}}}]).factory("Region",["$resource","api_host",function(a,b){return a(b+"/api/regions/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Competition",["$resource","api_host",function(a,b){return a(b+"/api/competitions/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Slider",["$resource","api_host",function(a,b){return a(b+"/api/sliders/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("User",["$resource","api_host",function(a,b){return a(b+"/api/users/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Role",["$resource","api_host",function(a,b){return a(b+"/api/roles/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Participant",["$resource","api_host",function(a,b){return a(b+"/api/participants/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Account",["$http","$rootScope","$auth","$location","api_host",function(a,b,c,d,e){return{profile:!1,profile_id:!1,fetching:!1,roles:[],regions:[],getProfile:function(f){var g=this;if(!c.isAuthenticated())return void(f&&g.listen(f));if(g.profile){if(!f)return this.profile;f(g.profile)}return g.fetching?(g.listen(f),!1):(g.fetching=!0,a.get(e+"/api/me").success(function(a){g.fetching=!1,null==a.user?(c.logout(),g.profile=!1,g.profile_id=!1,b.account=!1,g.broadcast(),d.url("/")):(g.profile=a.user,g.profile_id=g.profile.id,b.account=g.profile,g.regions=g.profile.regions,g.roles=g.profile.roles,g.broadcast()),f&&f(g.profile)})["catch"](function(a){c.logout(),g.profile=!1,g.profile_id=!1,g.broadcast()}))},hasRole:function(a){var b=_.find(this.roles,function(b){return b.name==a});return b?!0:!1},logout:function(){c.isAuthenticated()&&(this.profile=!1,this.profile_id=!1,b.account=!1,this.broadcast(),c.logout())},getStatus:function(){return a.get(e+"/api/me/status")},updateProfile:function(b){return a.put(e+"/api/me",b)},broadcast:function(){b.$broadcast("account",this.profile)},listen:function(a){b.$on("account",function(b,c,d){c&&a(c)})}}}]).factory("Icon",["$resource","api_host",function(a,b){return a(b+"/api/icons/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Cup",["$resource","api_host",function(a,b){return a(b+"/api/cups/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Mention",["$resource","api_host",function(a,b){return a(b+"/api/mentions/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("Color",["$resource","api_host",function(a,b){return a(b+"/api/colors/:id",{id:"@id"},{update:{method:"PUT"}})}]).factory("User",["$resource","api_host",function(a,b){return a(b+"/api/users/:id",{id:"@id"},{update:{method:"PUT"}})}]).filter("moment",function(){return function(a,b){return moment(a).format(b)}}).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}})}(),function(){angular.module("app.account",[])}(),function(){function a(a,b,c){a.profile={},c.getProfile(function(b){a.profile=b}),a.logout=function(){c.logout(),b.url("/")}}angular.module("app.account").controller("loginController",["$scope","$window","$auth","$location","logger","Account",function(a,b,c,d,e,f){a.doLogin=function(){c.login({email:a.email,password:a.password}).then(function(b){f.getProfile(function(b){a.account=b,d.url("/"),e.log("Estás adentro!")})})["catch"](function(a){e.logError("Hubo un inconveniente: ("+a+")")})},a.authenticate=function(a){c.authenticate(a).then(function(){})["catch"](function(a){})}}]).controller("sidebar-controller",["$scope","$auth","$state","logger","Account",function(a,b,c,d,e){a.regions=[],a.roles=[],e.getProfile(function(b){a.account=e.profile,a.profile=b,a.regions=b.regions,a.roles=b.roles}),a.viewRegion=function(a){c.go("region-view",{regionId:a})},a.hasRole=function(a){return e.hasRole(a)}}]).controller("session-bar-controller",["$scope","$location","Account",a])}(),function(){angular.module("app.sliders",[])}(),function(){angular.module("app.sliders").controller("slider-edit",["$scope","$window","$location","$state","$stateParams","$timeout","api_host","logger","Slider",function(a,b,c,d,e,f,g,h,i){a.format="dd/MM/yyyy",a.events=[],a.today=function(){a.event_date=new Date},a.clear=function(){a.event_date=null},a.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())},a.toggleMin=function(){a.minDate=a.minDate?null:new Date},a.dateOptions={formatYear:"yy",startingDay:1},a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.slider={},e.sliderId?i.get({id:e.sliderId},function(b){a.slider=b,a.event_date=moment(a.slider.event_date),a.setup_component()}):(a.slider=new i({region_id:e.regionId}),f(function(){a.setup_component()},1e3)),a.canSubmit=function(){return a.slider_form.$valid},a.revert=function(){a.slider=new i({})},a.submitForm=function(){a.slider.id?a.slider.$update(function(){h.logSuccess("El slider fue actualizado con éxito!"),d.go("slider-list")})["catch"](function(a){h.logError(a.message)}):a.slider.$save(function(){h.logSuccess("El slider fue creado con éxito!"),d.go("slider-list")})["catch"](function(a){h.logError(a.message)})},a.setup_component=function(){a.today(),$("#slider_event_date").bootstrapMaterialDatePicker({format:"DD MM YYYY HH:mm",minDate:new Date,currentDate:a.event_date,lang:"es"}).on("change",function(b,c){a.slider.event_date=c})},a.upload_url=g+"/api/media/slider/upload",a.uploading=!1,a.onUpload=function(b){a.uploading=!0},a.onError=function(b){a.uploading=!1},a.onComplete=function(b){a.uploading=!1,a.slider.cover_photo=b.data.filename}}]).controller("sliders-list",["$scope","$http","$state","logger","api_host","Slider",function(a,b,c,d,e,f){f.query(function(b){a.sliders=b}),a.view=function(a){c.go("slider-view",{sliderId:a})},a.remove=function(a){var b=new f(a);b.$remove(function(){d.logSuccess("El slider fue eliminado con éxito!"),c.go("slider-list",{},{reload:!0})})["catch"](function(a){d.logError(a.message)})},a.edit=function(a){c.go("slider-edit",{sliderId:a})}}])}(),function(){angular.module("app.regions",[])}(),function(){function a(a,b,c,d){a.regions=[],d.query(function(b){a.regions=b}),a.view=function(a){c.go("region-view",{regionId:a})},a.edit=function(a){c.go("region-edit",{regionId:a})}}function b(a,b,c,d,e,f,g,h){a.region=new f({}),c.regionId?f.get({id:c.regionId},function(b){a.region=b}):a.region=new f({}),g.query(function(b){a.colors=b}),h.query(function(b){a.icons=_.sortBy(_.filter(b,function(a){return a.is_region}),function(a){return a.code})}),a.canSubmit=function(){return a.region_form.$valid},a.revert=function(){a.region.id?b.go("region-view",{regionId:a.region.id}):d.url("/slam/regions/list")},a.submitForm=function(){a.region.id?a.region.$update(function(){e.logSuccess("El centro fue actualizado con éxito!"),b.go("region-view",{regionId:a.region.id})})["catch"](function(a){e.logError(a.message)}):a.region.$save(function(){e.logSuccess("El centro fue creado con éxito!"),b.go("region-view",{regionId:a.region.id})})["catch"](function(a){e.logError(a.message)})}}function c(a,b,c,d,e,f){a.region={},a.competitions=[],c.get({id:f.regionId},function(b){a.region=b,a.competitions=a.region.competitions}),a.createCompetition=function(){e.go("competition-new",{regionId:a.region.id})},a.edit=function(a){e.go("region-edit",{regionId:a})}}angular.module("app.regions").controller("regions-list",["$scope","$window","$state","Region",a]).controller("regions-edit",["$scope","$state","$stateParams","$location","logger","Region","Color","Icon",b]).controller("regions-view",["$scope","$window","Region","$location","$state","$stateParams",c])}(),function(){angular.module("app.competitions",[])}(),function(){angular.module("app.competitions").controller("competition-edit",["$scope","$window","$location","$state","$stateParams","$timeout","api_host","logger","Competition",function(a,b,c,d,e,f,g,h,i){a.torneo={},e.competitionId?i.get({id:e.competitionId},function(b){a.torneo=b,a.setup_component()}):(a.torneo=new i({region_id:e.regionId}),f(function(){a.setup_component()},1e3)),a.canSubmit=function(){return a.torneo_form.$valid},a.revert=function(){a.torneo=new i({})},a.submitForm=function(){a.torneo.id?a.torneo.$update(function(){h.logSuccess("El torneo fue actualizado con éxito!"),d.go("competition-view",{competitionId:a.torneo.id})})["catch"](function(a){h.logError(a.message)}):a.torneo.$save(function(){h.logSuccess("El torneo fue creado con éxito!"),d.go("competition-view",{competitionId:a.torneo.id})})["catch"](function(a){h.logError(a.message)})},a.setup_component=function(){var b=document.getElementById("torneo-location"),c={types:["geocode"],componentRestrictions:{country:"ar"}},d=new google.maps.places.Autocomplete(b,c);d.addListener("place_changed",function(){var b=d.getPlace();a.torneo.location=b}),jQuery("#torneo_event_date").bootstrapMaterialDatePicker({format:"DD MM YYYY HH:mm",minDate:moment().subtract(3,"years"),currentDate:moment(a.torneo.event_date),lang:"es"}).on("change",function(b,c){a.torneo.event_date=c})},a.upload_url=g+"/api/media/upload",a.uploading=!1,a.onUpload=function(b){a.uploading=!0},a.onError=function(b){a.uploading=!1},a.onComplete=function(b){a.uploading=!1,a.torneo.cover_photo=b.data.filename}}]).controller("competitions-list",["$scope","$http","$state","api_host","Competition",function(a,b,c,d,e){a.view=function(a){c.go("competition-view",{competitionId:a})},a.edit=function(a){c.go("competition-edit",{competitionId:a})}}]).controller("competition-view",["$scope","$window","Competition","$location","$state","$stateParams",function(a,b,c,d,e,f){a.competition={},a.show_participants=!0,a.participants=[],a.videos=[],a.show_videos=!1,a.show_cups=!1,a.fetchCompetition=function(){c.get({id:f.competitionId},function(b){a.competition=b,a.participants=b.users,a.videos=a.competition.videos,a.mentions=a.competition.mentions,a.cups=a.competition.cups})},a.fetchCompetition(),a.showParticipants=function(){a.show_participants=!0,a.show_videos=!1,a.show_cups=!1},a.showVideos=function(){a.show_participants=!1,a.show_videos=!0,a.show_cups=!1},a.showCups=function(){a.show_participants=!1,a.show_videos=!1,a.show_cups=!0},a.edit=function(a){e.go("competition-edit",{competitionId:a})}}]).controller("competition-participants",["$scope","$state",function(a,b){a.viewParticipant=function(a){b.go("participant-view",{participantId:a})},a.addParticipant=function(){}}]).controller("competition-videos",["$scope","$http","$sce","api_host","Competition",function(a,b,c,d,e){a.videos_result=[],a.search_videos=!1,a.query="",a.showSearch=function(){a.search_videos=!0},a.cancelSearch=function(){a.search_videos=!1},a.addVideo=function(c){b.post(d+"/api/competition/"+a.competition.id+"/video",{title:c.snippet.title,name:c.id.videoId,description:c.snippet.description,thumb_path:c.snippet.thumbnails.medium.url}).success(function(b){a.videos=b,c.picked=!0})},a.search=function(){b.post(d+"/api/media/videos/search",{q:a.query}).success(function(b){a.videos_result=b})},a.thumbnail=function(a){var b=a.snippet.thumbnails.medium.url;return c.trustAsResourceUrl(b)}}]).controller("video-controller",["$scope","$http","$sce","logger","api_host","Competition",function(a,b,c,d,e,f){a.editingParticipants=!1,a.participant_selected=void 0,a.participants_to_add=[],a.assignParticipants=function(){a.processVideoParticipants(),a.editingParticipants=!0},a.removeVideo=function(){b.post(e+"/api/competition/"+a.competition.id+"/remove/video/"+a.video.id,{}).success(function(b){a.video.removed=!0,d.logSuccess("El video fue quitado!")})},a.removeParticipant=function(c){b.post(e+"/api/competition/"+a.competition.id+"/video/"+a.video.id+"/remove/participant/"+c.id,{}).success(function(b){a.video=b,d.logSuccess("Participante desasignado")})},a.addParticipant=function(){a.editingParticipants=!1;var c=_.find(a.participants,function(b){return b.username=a.participant_selected});b.post(e+"/api/competition/"+a.competition.id+"/video/"+a.video.id+"/participant/"+c.id,{}).success(function(b){a.video=b,d.logSuccess("Participante asignado")})},a.cancelEditing=function(){a.editingParticipants=!1},a.processVideoParticipants=function(){a.participants_to_add=_.pluck(a.participants,"username")}}]).controller("competition-cups",["$scope","logger","Competition","Cup",function(a,b,c,d){a.cup=new d({}),a.editingCup=!1,a.newCup=function(){a.editingCup=!0,a.cup=new d({competition_id:a.competition.id})},a.editCup=function(b){a.cup=new d(b),a.editingCup=!0},a.canSubmit=function(){return a.cup_form.$valid},a.revert=function(){a.cup=new d({}),a.editingCup=!1},a.submitForm=function(){a.cup.id?a.cup.$update(function(){b.logSuccess("La Copa fue actualizada con éxito!"),a.editingCup=!1,a.fetchCompetition()})["catch"](function(a){b.logError(a.message)}):a.cup.$save(function(){b.logSuccess("La copa fue creada con éxito!"),a.editingCup=!1,a.fetchCompetition()})["catch"](function(a){b.logError(a.message)})}}]).controller("competition-mentions",["$scope","logger","Competition","Mention",function(a,b,c,d){a.mention=new d({}),a.editingMention=!1,a.newMention=function(){a.editingMention=!0,a.mention=new d({competition_id:a.competition.id})},a.editMention=function(b){a.mention=new d(b),a.editingMention=!0},a.canSubmit=function(){return a.mention_form.$valid},a.revert=function(){a.mention=new d({}),a.editingMention=!1},a.submitForm=function(){a.mention.id?a.mention.$update(function(){b.logSuccess("La Mención fue actualizada con éxito!"),a.editingMention=!1,a.fetchCompetition()})["catch"](function(a){b.logError(a.message)}):a.mention.$save(function(){b.logSuccess("La mención fue creada con éxito!"),a.editingMention=!1,a.fetchCompetition()})["catch"](function(a){b.logError(a.message)})}}])}(),function(){angular.module("app.users",[])}(),function(){function a(a,b,c,d){a.users=[],d.query(function(b){a.users=b}),a.view=function(a){c.go("user-view",{userId:a})}}function b(a,b,c,d){a.user=new d({}),a.canSubmit=function(){return a.user_form.$valid},a.revert=function(){a.user=new d({})},a.submitForm=function(){a.user.$save(function(){c.logSuccess("Usuario creado"),b.go("user-view",{userId:a.user.id})})["catch"](function(a){c.logError("Error al crear usuario, verifique los datos")})}}function c(a,b,c,d,e,f,g,h,i,j,k,l){a.user={},a.competitions=[],a.account=k,a.roles=[],a.regions=[],a.isRoleCollapsed=!0,a.isRegionCollapsed=!0,a.change_password=!1,a.changePassword=function(){a.change_password=!0},a.canSubmit=function(){return a.user_form.$valid},c.get({id:f.userId},function(b){a.user=b,a.fetchRoles(),a.fetchRegions()}),a.submitForm=function(){a.user.id==a.account.profile_id?g.put(l+"/api/me",a.user).success(function(a){h.logSuccess("Tus datos actualizados")}):a.user.$update(function(){h.logSuccess("Usuario actualizado")})["catch"](function(a){h.logError("Error al actualizar usuario, verifique los datos")})},a.fetchRoles=function(){i.query(function(b){a.roles=b,_.each(a.user.roles,function(b){var c=_.find(a.roles,function(a){return b.id==a.id});c.assigned=!0})})},a.fetchRegions=function(){j.query(function(b){a.regions=b,_.each(a.user.regions,function(b){var c=_.find(a.regions,function(a){return b.id==a.id});c.assigned=!0})})},a.saveRoles=function(){var b=_.filter(a.roles,function(a){return a.assigned});g.post(l+"/api/users/assign/roles",{userId:a.user.id,roles:b}).success(function(a){h.logSuccess("Roles asignados")})},a.saveRegions=function(){var b=_.filter(a.regions,function(a){return a.assigned});g.post(l+"/api/users/assign/regions",{userId:a.user.id,regions:b}).success(function(a){h.logSuccess("Regiones asignadas")})},a.revertRoles=function(){a.fetchRoles()},a.revertRegions=function(){a.fetchRegions()}}angular.module("app.users").controller("users-list",["$scope","$window","$state","User",a]).controller("users-edit",["$scope","$state","logger","User",b]).controller("users-view",["$scope","$window","User","$location","$state","$stateParams","$http","logger","Role","Region","Account","api_host",c])}(),function(){angular.module("app.participants",[])}(),function(){function a(a,b,c,d){a.participants=[],d.query(function(b){a.participants=b}),a.view=function(a){c.go("participant-view",{participantId:a})}}function b(a,b,c,d){a.participant=new d({}),a.canSubmit=function(){return a.participant_form.$valid},a.revert=function(){a.participant=new d({})},a.submitForm=function(){a.participant.$save(function(){c.url("/slam/participants/list")})["catch"](function(a){})}}function c(a,b,c,d,e,f){a.participant={},a.competitions=[],c.get({id:f.participantId},function(b){a.participant=b,a.competitions=a.participant.competitions}),a.createCompetition=function(){e.go("competition-new",{participantId:a.participant.id})}}angular.module("app.participants").controller("participants-list",["$scope","$window","$state","Participant",a]).controller("participants-edit",["$scope","$window","$location","Participant",b]).controller("participants-view",["$scope","$window","Participant","$location","$state","$stateParams",c])}();